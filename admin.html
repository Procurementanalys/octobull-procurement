<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login | Store Request</title>
<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(-20px); }
    to { opacity: 1; transform: translateY(0); }
  }
  @keyframes pulse {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
  }
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-15px); }
  }
  @keyframes bullRun {
    0%, 100% { transform: translateX(0) rotate(0deg); }
    50% { transform: translateX(10px) rotate(5deg); }
  }
  
  .animate-fadeIn { animation: fadeIn 0.6s ease-out; }
  .animate-pulse-slow { animation: pulse 3s ease-in-out infinite; }
  .icon-float { animation: float 3s ease-in-out infinite; }
  .bull-run { animation: bullRun 2s ease-in-out infinite; }
  
  /* Octobull Theme */
  .gradient-octobull {
    background: linear-gradient(135deg, #FF6B35 0%, #F7931E 50%, #1E88E5 100%);
  }
  .gradient-octobull-card {
    background: linear-gradient(135deg, #ffffff 0%, #FFF5F0 100%);
  }
  .bg-octobull-orange { background: linear-gradient(135deg, #FF6B35 0%, #FF8C42 100%); }
  .bg-octobull-blue { background: linear-gradient(135deg, #1E88E5 0%, #42A5F5 100%); }
  .bg-octobull-green { background: linear-gradient(135deg, #10b981 0%, #059669 100%); }
  
  body {
    background: linear-gradient(135deg, #FF6B35 0%, #F7931E 30%, #1E88E5 100%);
    position: relative;
    overflow: hidden;
  }
  
  /* Floating Bulls Animation */
  .bull-icon {
    position: absolute;
    font-size: 3rem;
    opacity: 0.1;
    animation: float 4s ease-in-out infinite;
  }
  .bull-1 { top: 10%; left: 10%; animation-delay: 0s; }
  .bull-2 { top: 20%; right: 15%; animation-delay: 1s; }
  .bull-3 { bottom: 15%; left: 20%; animation-delay: 2s; }
  .bull-4 { bottom: 25%; right: 10%; animation-delay: 1.5s; }
  
  input:focus {
    transform: scale(1.02);
    transition: all 0.3s ease;
    border-color: #FF6B35;
    box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
  }
  
  button:hover {
    transform: translateY(-3px);
    transition: all 0.3s ease;
  }
  
  .card-shadow {
    box-shadow: 0 25px 60px rgba(0, 0, 0, 0.3);
  }
  
  /* Decorative circles */
  .deco-circle {
    position: absolute;
    border-radius: 50%;
    opacity: 0.15;
  }
  .deco-1 {
    width: 400px;
    height: 400px;
    background: radial-gradient(circle, #ffffff 0%, transparent 70%);
    top: -150px;
    left: -150px;
  }
  .deco-2 {
    width: 500px;
    height: 500px;
    background: radial-gradient(circle, #ffffff 0%, transparent 70%);
    bottom: -200px;
    right: -200px;
  }
</style>
</head>
<body class="flex items-center justify-center min-h-screen">

<!-- Floating Bulls -->
<div class="bull-icon bull-1">üêÇ</div>
<div class="bull-icon bull-2">üìà</div>
<div class="bull-icon bull-3">üêÇ</div>
<div class="bull-icon bull-4">üí∞</div>

<!-- Decorative circles -->
<div class="deco-circle deco-1"></div>
<div class="deco-circle deco-2"></div>

<div class="gradient-octobull-card card-shadow rounded-3xl p-12 w-[480px] text-center animate-fadeIn backdrop-blur-lg border-2 border-white/50 relative z-10">
  
  <!-- Logo/Icon with Bull -->
  <div class="mb-8 icon-float">
    <div class="mx-auto w-24 h-24 bg-octobull-orange rounded-3xl flex items-center justify-center shadow-2xl relative overflow-hidden">
      <div class="absolute inset-0 bg-gradient-to-br from-white/20 to-transparent"></div>
      <span class="text-5xl bull-run relative z-10">üêÇ</span>
    </div>
  </div>
  
  <h2 class="text-4xl font-extrabold mb-3 bg-gradient-to-r from-orange-600 via-amber-500 to-blue-600 bg-clip-text text-transparent">
    Octobull Store
  </h2>
  <p class="text-gray-600 mb-10 text-base font-medium">
    <i class="fas fa-shopping-cart text-orange-500 mr-2"></i>
    Request Management System
  </p>
  
  <!-- Input Store Code -->
  <div class="relative mb-5">
    <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
      <i class="fas fa-store text-orange-500 text-lg"></i>
    </div>
    <input id="store_code" type="text" placeholder="Kode Store" 
      class="w-full pl-14 pr-5 py-4 border-3 border-gray-300 rounded-2xl focus:ring-4 focus:ring-orange-200 outline-none transition-all text-base font-medium shadow-lg">
  </div>
  
  <!-- Input Password -->
  <div class="relative mb-8">
    <div class="absolute inset-y-0 left-0 pl-5 flex items-center pointer-events-none">
      <i class="fas fa-lock text-blue-500 text-lg"></i>
    </div>
    <input id="password" type="password" placeholder="Password" 
      class="w-full pl-14 pr-5 py-4 border-3 border-gray-300 rounded-2xl focus:ring-4 focus:ring-blue-200 outline-none transition-all text-base font-medium shadow-lg">
  </div>
  
  <!-- Login Button -->
  <button onclick="login()" 
    class="w-full bg-octobull-orange text-white py-4 rounded-2xl hover:shadow-2xl transition-all font-bold text-lg flex items-center justify-center gap-3 mb-3 shadow-xl">
    <i class="fas fa-sign-in-alt text-xl"></i>
    <span>Login Sekarang</span>
  </button>
  
  <p id="msg" class="text-sm text-red-600 mt-4 font-semibold"></p>
  
  <!-- Reset Password Section -->
  <div id="resetForm" class="hidden mt-8 border-t-2 border-orange-200 pt-8">
    <h3 class="text-xl font-bold text-gray-800 mb-5 flex items-center justify-center gap-2">
      <i class="fas fa-key text-orange-500"></i> 
      <span>Reset Password</span>
    </h3>
    <div class="relative mb-4">
      <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
        <i class="fas fa-store text-gray-400"></i>
      </div>
      <input id="reset_store" type="text" placeholder="Kode Store" 
        class="w-full pl-12 pr-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-green-200 focus:border-green-400 outline-none transition-all shadow-md">
    </div>
    <div class="relative mb-5">
      <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
        <i class="fas fa-key text-gray-400"></i>
      </div>
      <input id="new_pass" type="password" placeholder="Password Baru" 
        class="w-full pl-12 pr-4 py-3 border-2 border-gray-300 rounded-xl focus:ring-4 focus:ring-green-200 focus:border-green-400 outline-none transition-all shadow-md">
    </div>
    <button onclick="resetPassword()" 
      class="w-full bg-octobull-green text-white py-3 rounded-xl hover:shadow-xl transition-all font-bold flex items-center justify-center gap-2 shadow-lg">
      <i class="fas fa-sync-alt"></i>
      <span>Reset Password</span>
    </button>
    <p id="resetMsg" class="text-sm text-gray-700 mt-4 font-medium"></p>
  </div>
  
  <!-- Toggle Reset Link -->
  <button onclick="showReset()" class="mt-8 text-base text-orange-600 hover:text-orange-800 font-bold hover:underline transition-all">
    <i class="fas fa-question-circle"></i> Lupa Password?
  </button>
  
  <!-- Footer Note -->
  <div class="mt-8 pt-6 border-t-2 border-gray-200">
    <p class="text-xs text-gray-500 flex items-center justify-center gap-2">
      <i class="fas fa-shield-alt text-orange-500"></i>
      <span>Powered by <strong class="text-orange-600">Octobull</strong> System</span>
    </p>
  </div>
</div>

<script>
const BASE_URL='https://script.google.com/macros/s/AKfycbyEIxM30bhdFSv62EwNJ3yO6V5I-b_g3ZhXWzVea6rbZj7j1Nq_-ljdIPG5yk5skVtJjw/exec';

async function login(){
  const store_code=document.getElementById("store_code").value.trim();
  const password=document.getElementById("password").value.trim();
  const msg=document.getElementById("msg");
  msg.innerText="Sedang memproses...";
  const res=await fetch(`${BASE_URL}?action=login&store_code=${store_code}&password=${password}`);
  const data=await res.json();
  if(data.success){
    localStorage.setItem("store_code",data.store_code);
    localStorage.setItem("store_name",data.store_name);
    localStorage.setItem("role",data.role);
    if(data.role.toLowerCase()==="admin") window.location.href="admin.html";
    else window.location.href="request.html";
  }else msg.innerText=data.message;
}
function showReset(){document.getElementById("resetForm").classList.toggle("hidden");}
async function resetPassword(){
  const store_code=document.getElementById("reset_store").value.trim();
  const new_pass=document.getElementById("new_pass").value.trim();
  const res=await fetch(BASE_URL,{method:"POST",body:new URLSearchParams({action:"resetPassword",store_code,new_pass})});
  const data=await res.json();
  document.getElementById("resetMsg").innerText=data.message;
}
</script>
</body>
</html>
